<!-- <div class="container-fluid px-0">
  <div class="ratio ratio-16x9">
    <iframe *ngIf="trailerUrl" [src]="trailerUrl" allowfullscreen></iframe>
  </div>
</div> -->

<div class="position-relative  hero-gradient" style="height: 70vh; overflow: hidden;">
  <!-- Background Trailer or Poster -->
  <!-- <div class="ratio ratio-16x9 position-absolute" style="filter: blur(1px); overflow: hidden;">
    <ng-container *ngIf="trailerUrl; else poster">
      <iframe [src]="trailerUrl" allowfullscreen #trailerPlayer id="trailerPlayer" muted autoplay (ended)="playNextTrailer()"></iframe>
    </ng-container>
    <ng-template #poster>
      <img *ngIf="posterUrl" [src]="posterUrl" class="w-100 h-100 object-fit-cover" alt="Movie Poster">
    </ng-template>
  </div> -->

   <div class="w-100 h-100 position-absolute top-0 start-0 overflow-hidden" style="z-index: 0;">
   <div class="ratio ratio-16x9 position-absolute" style="filter: blur(1px); overflow: hidden;">
    <ng-container *ngIf="trailerUrl; else poster">
      <iframe [src]="trailerUrl" allowfullscreen #trailerPlayer id="trailerPlayer" muted autoplay (ended)="playNextTrailer()"></iframe>
    </ng-container>
    <ng-template #poster>
      <img *ngIf="posterUrl" [src]="posterUrl" class="w-100 h-100 object-fit-cover" alt="Movie Poster">
    </ng-template>
  </div>
  </div>

  <!-- Overlay UI -->
 <div class="position-absolute top-0 start-0 w-100 h-100 d-flex flex-column justify-content-between text-white px-4 py-3" style="z-index: 2;">

    <!-- Navbar -->
    <!-- <nav class="navbar navbar-expand-lg navbar-dark">
      <div class="container-fluid">
        <a class="navbar-brand" href="#">🎬 OTT</a>
        <form class="d-flex me-auto" role="search" (submit)="$event.preventDefault(); searchMovies();">
          <input [(ngModel)]="searchQuery" name="search" class="form-control me-2" type="search" placeholder="Search movies or actors..." aria-label="Search">
          <button class="btn btn-outline-light" type="button" (click)="searchMovies()">Search</button>
        </form>
        <div class="dropdown">
          <button class="btn btn-outline-light dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">☰</button>
          <ul class="dropdown-menu dropdown-menu-end">
            <li><a class="dropdown-item" (click)="chooseMood('feel-good')">Feel Good</a></li>
            <li><a class="dropdown-item" (click)="chooseMood('action-fix')">Action Fix</a></li>
            <li><a class="dropdown-item" (click)="chooseMood('mind-benders')">Mind Benders</a></li>
            <li><a class="dropdown-item" (click)="chooseMood('romantic')">Romantic</a></li>
            <li><a class="dropdown-item" (click)="chooseMood('thriller')">Thriller</a></li>
            <li><a class="dropdown-item" (click)="chooseMood('animation')">Animation</a></li>
          </ul>
        </div>
      </div>
    </nav> -->

<div class="mt-auto mb-3 ms-4 movie-overlay">
  <h2 class="fw-bold card-title">{{ featuredMovie?.title }}</h2>
  <p class="mb-1 small">
    {{ featuredMovie?.release_date | date:'yyyy' }} &bull; ⭐ {{ featuredMovie?.vote_average }} &bull;
    {{ featuredMovie?.original_language?.toUpperCase() }}
  </p>
  <p class="small">{{ featuredMovie?.overview }}</p>
  <button class="btn btn-primary me-2">▶ Watch Now</button>
  <button class="btn btn-outline-light" (click)="toggleMute()">
    {{ isMuted ? '🔇 Unmute' : '🔊 Mute' }}
  </button>
</div>

  </div>
</div>

<div class="container-fluid bg-dark text-white px-4 py-4">
  <h4 class="mb-3 fw-bold">🔥 Trending Now</h4>
  <div class="d-flex overflow-x-scroll hide-scrollbar gap-4 p-4">
    <div
      *ngFor="let show of trendingMovies; let i = index"
      class="position-relative trending-card card bg-black text-white border-0 rounded-4"
      style="min-width: 200px; cursor: pointer;"
      (click)="goToDetails(show.id)"
    >
      <img
        [src]="'https://image.tmdb.org/t/p/w300' + show.poster_path"
        class="card-img-top rounded-4"
        alt="{{ show.title }}"
      />
      <div class="position-absolute top-0 start-0 badge-index">
        {{ i + 1 }}
      </div>
      <div class="card-img-overlay d-flex flex-column justify-content-end p-2 info-overlay">
        <h6 class="card-title text-white mb-1 text-truncate">{{ show.title }}</h6>
        <small class="text-white-50">{{ show.release_date | date: 'yyyy' }} • ⭐ {{ show.vote_average }}</small>
      </div>
    </div>
  </div>


   <h4 class="mb-3 fw-bold">🌟 Popular</h4>
  <div class="d-flex overflow-x-scroll hide-scrollbar gap-4 p-4">
    <ng-container *ngFor="let movie of popularMovies; let i = index">
      <div class="position-relative trending-card card bg-black text-white border-0 rounded-4"
           style="min-width: 200px; cursor: pointer;" (click)="goToDetails(movie.id)">
        <img [src]="'https://image.tmdb.org/t/p/w300' + movie.poster_path" class="card-img-top rounded-4" />
        <div class="position-absolute top-0 start-0 badge-index">{{ i + 1 }}</div>
        <div class="card-img-overlay d-flex flex-column justify-content-end p-2 info-overlay">
          <h6 class="card-title text-white mb-1 text-truncate">{{ movie.title }}</h6>
          <small class="text-white-50">{{ movie.release_date | date: 'yyyy' }} • ⭐ {{ movie.vote_average }}</small>
        </div>
      </div>
    </ng-container>
  </div>

  <!-- 📈 Top Rated -->
  <h4 class="mb-3 fw-bold">📈 Top Rated</h4>
  <div class="d-flex overflow-x-scroll hide-scrollbar gap-4 p-4">
    <ng-container *ngFor="let movie of topRatedMovies; let i = index">
      <div class="position-relative trending-card card bg-black text-white border-0 rounded-4"
           style="min-width: 200px; cursor: pointer;" (click)="goToDetails(movie.id)">
        <img [src]="'https://image.tmdb.org/t/p/w300' + movie.poster_path" class="card-img-top rounded-4" />
        <div class="position-absolute top-0 start-0 badge-index">{{ i + 1 }}</div>
        <div class="card-img-overlay d-flex flex-column justify-content-end p-2 info-overlay">
          <h6 class="card-title text-white mb-1 text-truncate">{{ movie.title }}</h6>
          <small class="text-white-50">{{ movie.release_date | date: 'yyyy' }} • ⭐ {{ movie.vote_average }}</small>
        </div>
      </div>
    </ng-container>
  </div>
</div>


<!-- <div class="container py-4">
  <h1 class="mb-4">🎬 OTT Movie Explorer</h1>
  <p class="lead">Explore trending movies or search for your favorite films and actors.</p>

  <div class="input-group mb-4">
    <input [(ngModel)]="searchQuery" type="text" class="form-control" placeholder="Search movies or actors..." (keyup.enter)="searchMovies()">
    <button class="btn btn-outline-secondary" (click)="searchMovies()">Search</button>
  </div>

  <div class="mb-4">
    <h5 class="mb-2">Explore by Category</h5>
    <div class="btn-group flex-wrap">
      <button class="btn btn-outline-primary" (click)="chooseMood('feel-good')">Feel Good</button>
      <button class="btn btn-outline-danger" (click)="chooseMood('action-fix')">Action Fix</button>
      <button class="btn btn-outline-warning" (click)="chooseMood('mind-benders')">Mind Benders</button>
      <button class="btn btn-outline-success" (click)="chooseMood('romantic')">Romantic</button>
      <button class="btn btn-outline-info" (click)="chooseMood('thriller')">Thriller</button>
      <button class="btn btn-outline-dark" (click)="chooseMood('animation')">Animation</button>
    </div>
  </div>

  <div *ngIf="searchResults.length" class="row">
    <h5 class="mt-3">Search Results</h5>
    <div class="col-md-3 mb-4" *ngFor="let result of searchResults">
      <div class="card h-100 shadow-sm" (click)="goToDetails(result.id)" style="cursor:pointer;">
        <img [src]="'https://image.tmdb.org/t/p/w500' + result.poster_path" class="card-img-top" alt="{{result.title}} poster" *ngIf="result.poster_path">
        <div class="card-body">
          <h5 class="card-title">{{ result.title }}</h5>
          <p class="card-text small text-muted">
            {{ result.release_date | date:'yyyy' }} &bull; ⭐ {{ result.vote_average }}
          </p>
        </div>
      </div>
    </div>
  </div>

  <div *ngIf="movies.length" class="row">
    <h5 class="mt-3 text-capitalize">{{ selectedMood.replace('-', ' ') }} Movies</h5>
    <div class="col-md-3 mb-4" *ngFor="let movie of movies">
      <div class="card h-100 shadow-sm" (click)="goToDetails(movie.id)" style="cursor:pointer;">
        <img [src]="'https://image.tmdb.org/t/p/w500' + movie.poster_path" class="card-img-top" alt="{{movie.title}} poster" *ngIf="movie.poster_path">
        <div class="card-body">
          <h5 class="card-title">{{ movie.title }}</h5>
          <p class="card-text small text-muted">
            {{ movie.release_date | date:'yyyy' }} &bull; ⭐ {{ movie.vote_average }}
          </p>
        </div>
      </div>
    </div>
  </div>

  <div *ngIf="!movies.length && !searchResults.length && selectedMood">
    <p class="text-muted">No results found for selected category.</p>
  </div>
</div> -->




